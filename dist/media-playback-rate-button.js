import u from"./media-chrome-button.js";import{defineCustomElement as l}from"./utils/defineCustomElement.js";import{Window as E}from"./utils/server-safe-globals.js";import{MediaUIEvents as d,MediaUIAttributes as i}from"./constants.js";import{nouns as m}from"./labels/labels.js";const b=[1,1.25,1.5,1.75,2],a=1;class c extends u{static get observedAttributes(){return[...super.observedAttributes,i.MEDIA_PLAYBACK_RATE,"rates"]}constructor(){super();this._rates=b,this.nativeEl.innerHTML=`${a}x`}connectedCallback(){this.setAttribute(i.MEDIA_CHROME_ATTRIBUTES,this.constructor.observedAttributes.join(" ")),super.connectedCallback()}attributeChangedCallback(r,o,e){if(r==="rates"){const s=(e!=null?e:"").split(/,\s?/).map(t=>t?+t:Number.NaN).filter(t=>!Number.isNaN(t)).sort();this._rates=s.length?s:b;return}if(r===i.MEDIA_PLAYBACK_RATE){const s=e?+e:Number.NaN,t=Number.isNaN(s)?a:s;this.nativeEl.innerHTML=`${t}x`,this.setAttribute("aria-label",m.PLAYBACK_RATE({playbackRate:t}));return}super.attributeChangedCallback(r,o,e)}handleClick(r){var t,n;const o=+this.getAttribute(i.MEDIA_PLAYBACK_RATE)||a,e=(n=(t=this._rates.find(A=>A>o))!=null?t:this._rates[0])!=null?n:a,s=new E.CustomEvent(d.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(s)}}l("media-playback-rate-button",c);export default c;
